<h1 class="text-3xl font-bold mb-6">Admin Dashboard</h1>

<div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
  <div class="bg-white shadow rounded-lg p-5 text-center">
    <h2 class="text-sm font-medium text-gray-500">Total Users</h2>
    <p class="text-3xl font-bold text-indigo-600 mt-2"><%= @total_users %></p>
  </div>

  <div class="bg-white shadow rounded-lg p-5 text-center">
    <h2 class="text-sm font-medium text-gray-500">Active Enrollments</h2>
    <p class="text-3xl font-bold text-green-600 mt-2"><%= @active_enrollments %></p>
  </div>

  <div class="bg-white shadow rounded-lg p-5 text-center">
    <h2 class="text-sm font-medium text-gray-500">Published Courses</h2>
    <p class="text-3xl font-bold text-blue-600 mt-2"><%= @published_courses %></p>
  </div>

  <div class="bg-white shadow rounded-lg p-5 text-center">
    <h2 class="text-sm font-medium text-gray-500">Total Earnings (₹)</h2>
    <p class="text-3xl font-bold text-yellow-600 mt-2"><%= number_to_currency(@total_earnings, unit: "₹") %></p>
  </div>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
  <div class="bg-white shadow rounded-lg p-5">
    <h3 class="text-lg font-semibold mb-3">Earnings (Last 6 Months)</h3>
    <%= line_chart @earnings_chart_data, height: "250px", library: { colors: ["#6366f1"] } %>
  </div>

  <div class="bg-white shadow rounded-lg p-5">
    <h3 class="text-lg font-semibold mb-3">Enrollment Growth</h3>
    <%= area_chart @enrollment_growth_data, height: "250px", library: { colors: ["#10b981"] } %>
  </div>
</div>

<div class="bg-white rounded-xl shadow-lg p-5">
  <h3 class="text-lg font-semibold mb-3">Recent Comments</h3>
  <% if @recent_comments.any? %>
    <ul class="divide-y divide-gray-200">
      <% @recent_comments.each do |comment| %>
        <li class="py-3">
          <div class="flex justify-between items-center">
            <div>
              <p class="font-medium text-gray-700"><%= comment.user.full_name %></p>
              <p class="text-gray-500 text-sm">
                on <strong>
                  <%= comment.commentable.try(:title) || comment.commentable.try(:name) || comment.commentable.class.name %>
                </strong>
              </p>
              <p class="text-gray-600 mt-1">"<%= truncate(comment.content, length: 80) %>"</p>
            </div>
            <div class="text-xs text-gray-400"><%= time_ago_in_words(comment.created_at) %> ago</div>
          </div>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p class="text-gray-500 italic">No comments yet.</p>
  <% end %>
</div>
